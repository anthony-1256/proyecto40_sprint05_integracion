import{B as T,C as A,E as I,G as L,e as h,i as y,m as O,n as _,p as M,q as S,r as w,s as E,t as U,u as v,x as P,y as W,z as N}from"./chunk-WCT7CNWR.js";import{Ba as p,Ga as b,Ya as n,Za as r,a as C,cb as c,d as F,kb as i,nb as l,ob as m,pb as s,wa as a}from"./chunk-HA26ZXMN.js";var g=F(O());var B=class f{constructor(d,u){this.authService=d;this.router=u}currentUser={id:0,name:"",age:0,gender:"",email:"",username:"Invitado",password:"",admin:!1,paymentMethods:[],deliveryAddresses:[]};ngOnInit(){this.authService.currentUser$.subscribe(d=>{d?this.currentUser=C({},d):this.router.navigate(["/auth/login"])})}saveProfileChanges(){if(!this.currentUser.name.trim()||!this.currentUser.email.trim()||!this.currentUser.username.trim()){g.default.fire({icon:"warning",title:"Campos obligatorios",text:"Por favor completa nombre, email y nombre de usuario.",color:"#000",background:"#fff"});return}this.authService.updateUser(this.currentUser),g.default.fire({icon:"success",title:"Perfil actualizado",text:"Los cambios se guardaron correctamente.",color:"#000",background:"#fff"}).then(()=>{this.router.navigate(["/perfil"])})}cancel(){this.router.navigate(["/perfil"])}static \u0275fac=function(u){return new(u||f)(p(L),p(y))};static \u0275cmp=b({type:f,selectors:[["app-edit-profile"]],decls:37,vars:6,consts:[[1,"container","mt-4"],[1,"mb-4"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","username","id","name","name","name","autocomplete","name",1,"form-label"],["type","text","id","username","name","username","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password","id","password","name","password","autocomplete","current-password",1,"form-label"],["type","password","id","password","name","password",1,"form-control",3,"ngModelChange","ngModel"],["for","age",1,"form-label"],["type","number","id","age","name","age","min","0",1,"form-control",3,"ngModelChange","ngModel"],["for","gender",1,"form-label"],["id","gender","name","gender",1,"form-select",3,"ngModelChange","ngModel"],["value","masculino"],["value","femenino"],[1,"d-flex","justify-content-between"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(u,t){u&1&&(n(0,"div",0)(1,"h2",1),i(2,"Editar Perfil"),r(),n(3,"form",2),c("ngSubmit",function(){return t.saveProfileChanges()}),n(4,"div",3)(5,"label",4),i(6,"Nombre completo"),r(),n(7,"input",5),s("ngModelChange",function(e){return m(t.currentUser.name,e)||(t.currentUser.name=e),e}),r()(),n(8,"div",3)(9,"label",6),i(10,"Correo electr\xF3nico"),r(),n(11,"input",7),s("ngModelChange",function(e){return m(t.currentUser.email,e)||(t.currentUser.email=e),e}),r()(),n(12,"div",3)(13,"label",8),i(14,"Nombre de usuario"),r(),n(15,"input",9),s("ngModelChange",function(e){return m(t.currentUser.username,e)||(t.currentUser.username=e),e}),r()(),n(16,"div",3)(17,"label",10),i(18,"Contrase\xF1a"),r(),n(19,"input",11),s("ngModelChange",function(e){return m(t.currentUser.password,e)||(t.currentUser.password=e),e}),r()(),n(20,"div",3)(21,"label",12),i(22,"Edad"),r(),n(23,"input",13),s("ngModelChange",function(e){return m(t.currentUser.age,e)||(t.currentUser.age=e),e}),r()(),n(24,"div",3)(25,"label",14),i(26,"G\xE9nero"),r(),n(27,"select",15),s("ngModelChange",function(e){return m(t.currentUser.gender,e)||(t.currentUser.gender=e),e}),n(28,"option",16),i(29,"Masculino"),r(),n(30,"option",17),i(31,"Femenino"),r()()(),n(32,"div",18)(33,"button",19),i(34," Guardar Cambios "),r(),n(35,"button",20),c("click",function(){return t.cancel()}),i(36," Cancelar "),r()()()()),u&2&&(a(7),l("ngModel",t.currentUser.name),a(4),l("ngModel",t.currentUser.email),a(4),l("ngModel",t.currentUser.username),a(4),l("ngModel",t.currentUser.password),a(4),l("ngModel",t.currentUser.age),a(4),l("ngModel",t.currentUser.gender))},dependencies:[I,U,W,N,_,v,P,M,S,A,T,E,w,h],encapsulation:2})};export{B as EditProfileComponent};
